(function(){this.datetimeFormat=function(e){var t;if(e)return t={month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"},(e=new Date(e)).toLocaleDateString("en-us",t)},this.dateFormat=function(e,t){var n,a,o,r,i;if(e)return e=new Date(e),"UTC"===t?(o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=e.getUTCDate(),a=e.getUTCMonth(),i=e.getUTCFullYear(),o[a]+" "+n+", "+i):(r={month:"short",day:"numeric",year:"numeric"},e.toLocaleString("en-CA",r))},this.currencyFormat=function(e,t){var n,a;return n=e/100,a=e<0?"-$"+Math.abs(n):"$"+n,t&&(a+=" "+t),a},this.booleanFormat=function(e){return!0===e||1===e?"True":"False"},this.isEmptyObject=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},this.zeroPad=function(e){return("0"+e).slice(-2)},this.formatDateString=function(e){var t;return t=new Date(e),zeroPad(t.getMonth()+1)+"/"+zeroPad(t.getDate())+"/"+t.getFullYear()},this.titleize=function(e){var t,n,a,o,r;for(t=n=0,a=(r=e.split(" ")).length;n<a;t=++n)o=r[t],r[t]=o.replace(/^./,o[0].toUpperCase());return r.join(" ")},this.arraysDiffer=function(e,n){var a;return a=!1,e.length!==n.length?a=!0:e.forEach(function(e,t){this.isSame(e,n[t])||(a=!0)},this),a},this.objectsDiffer=function(t,n){var a;return a=!1,Object.keys(t).length!==Object.keys(n).length?a=!0:Object.keys(t).forEach(function(e){this.isSame(t[e],n[e])||(a=!0)},this),a},this.isSame=function(e,t){return typeof e==typeof t&&(Array.isArray(e)&&Array.isArray(t)?!this.arraysDiffer(e,t):"function"==typeof e?e.toString()===t.toString():"object"==typeof e&&null!==e&&null!==t?!this.objectsDiffer(e,t):e===t)},this.parseDateString=function(e,t,n){var a,o,r,i,c;return null==n&&(n="%y %m %d"),e?"object"==typeof e?e:(a=n.split(" "),c=(o=e.split(t))[a.indexOf("%y")],i=Number(o[a.indexOf("%m")])-1,r=o[a.indexOf("%d")],new Date(c,i,r)):new Date},this.getUrlParam=function(e){var t,n,a,o,r;for(t=n=0,a=(r=window.location.search.substring(1).split("&")).length;n<a;t=++n)if((o=r[t].split("="))[0]===e)return o[1]}}).call(this),function(){var n,a,s,o;$(document).ready(function(){var e,t;if(0<$("#map").length)return t=a(),gon.coordinates?(e=o(t),n(t,e)):n(t,[[43.7085,-79.3959]])}),a=function(){var e;return e=L.map("map"),L.tileLayer("//api.tiles.mapbox.com/v4/mapbox.high-contrast/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiamlmZnlvbmRlbWFuZCIsImEiOiJiXzZGQ1o4In0.-cJyN_e12UG_Pjr5qZ7q3A",{attribution:'Map data &copy; <a href="//openstreetmap.org">OpenStreetMap</a> contributors, <a href="//creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery &copy; <a href="//mapbox.com">Mapbox</a>'}).addTo(e),e},o=function(e){var t,n,a,o,r,i,c;for(n=[],a=0,i=(c=gon.coordinates).length;a<i;a++)r=c[a],t=L.latLng(r.lat,r.lng),r.info&&r.link&&(o="<h4>"+r.info+"</h4> <a href='"+r.link+"' class='btn btn-default btn-block btn-xs'>View Details</a>"),n.push(t),s(e,t,o);return n},s=function(e,t,n){var a,o;if(o={icon:new L.Icon.Default},a=L.marker(t,o).addTo(e),n)return a.bindPopup(n).openPopup()},n=function(e,t){var n;return n=L.latLngBounds(t),e.fitBounds(n,{padding:[20,20],maxZoom:15})}}.call(this),function(){$(document).ready(function(){return $(".anchor").on("click",function(e){var t,n;return e.preventDefault(),0<(t=$("#"+$(this).data("anchor"))).length?(n=t.offset().top,$("body, html").animate({scrollTop:n-70})):window.location.href="/"})})}.call(this),function(){var t;jQuery(function(){0}),t={"new":function(){return $("#new_bank_form").submit(function(e){return e.preventDefault(),$('input[type="submit"]').attr("disabled",!0),0<$("#bank-account-token").val().length?$("#new_bank_form")[0].submit():t.create()})},create:function(){var e;return e={country:"CA",currency:"CAD",routing_number:$("#bank_form_transit_number").val()+$("#bank_form_institution_number").val(),account_number:$("#bank_form_account_number").val()},Stripe.bankAccount.createToken(e,t.stripeResponseHandler)},stripeResponseHandler:function(e,t){return t.error?($("#stripe-error").show(),$("#stripe-error-msg").text(t.error.message).show(),$('input[type="submit"]').attr("disabled",!1)):($("#bank-account-token").val(t.id),$("#new_bank_form")[0].submit())}}}.call(this),function(){$(document).ready(function(){return $("#expiry-date").datepicker({autoclose:!0,startDate:"+1d"})})}.call(this),$(document).ready(function(){$(".professional-signup-button").on("click",function(){window._fbq.push(["track","CompleteRegistration"])})}),$(document).ready(function(){$(".hamburger").on("click",function(e){e.preventDefault();var t=$(this).data("target");$(t).slideToggle()}),$(".nav-dropdown-heading").on("click",function(e){e.preventDefault();var t=$(this).parent(".nav-dropdown");t.hasClass("active")?t.removeClass("active"):(t.siblings(".active").removeClass("active"),t.addClass("active"))})}),$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip()}),$(document).ready(function(){$("#admin-eta-date").datepicker({autoclose:!0,startDate:new Date})}),$(document).on("nested:fieldAdded:date_requests",function(e){e.field.find(".admin-job-requested-for").datepicker({autoclose:!0,todayHighlight:!0})}),$(document).ready(function(){$(".admin-job-requested-for").datepicker({autoclose:!0,todayHighlight:!0}),$(".datepicker").datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0}),n=gon.minimum_charge_cents,o=gon.unit_price_cents,r=$("#job_units_billed").val(),e=$("#job_additional_cost").val(),(a=r*o)<n&&(a=n),$("#job_after_hours_billed").is(":checked")&&(a*=1.5),t="$"+((a+=100*e)/100).toFixed(2),$("#subtotal strong").text(t);var e,t,n,a,o,r}),function(){var e;$(document).ready(function(){if(0<$(".job-panel-sidebar").length&&0<$("#job-form").length)return $(".job-panel-sidebar").hide(),$("#job-form input, #job-form textarea, #job-form a").on("focus",function(){return e($(this))})}),e=function(e){var t;if(!(t=e.parents(".form-section")).find(".job-panel-sidebar").is(":visible"))return $(".job-panel-sidebar").fadeOut(),t.find(".job-panel-sidebar").fadeIn()}}.call(this),$(document).ready(function(){document.location.toString().match("#"),$(".nav-tabs a").on("shown.bs.tab",function(e){window.location.hash=e.target.hash})}),$(document).ready(function(){$(".alert-details-toggle").on("click",function(e){e.preventDefault();var s=$(this);$("#alert-details-modal").on("show.bs.modal",function(){var e=$(this),t=s.data("regionalServiceName")||"",n=s.data("title")||"",a=s.data("message")||"",o=s.data("expDate")||"",r=s.data("sentiment")||"",i=s.data("editPath"),c=s.data("deletePath");e.find("#alert-service-name").text(t),e.find("#alert-title").text(n),e.find("#alert-message").text(a),e.find("#alert-exp-date").text(o),e.find("#alert-sentiment").text(r),e.find("#alert-edit").attr("href",i),e.find("#alert-delete").attr("href",c)}),$("#alert-details-modal").appendTo("body").modal("show")})}),$(document).ready(function(){function a(e,t){t.toggleClass("collapsed")}$("[data-type='collapsible-toggle']").each(function(e,t){var n=$(t.dataset.target);0<n.length&&$(t).on("click",function(e){e.preventDefault(),a(t,n)})})}),jQuery.debounce=function(o,r,i){var c,s;return function(){var e,t,n=this,a=arguments;return e=function(){c=null,i||(s=o.apply(n,a))},t=i&&!c,clearTimeout(c),c=setTimeout(e,r),t&&(s=o.apply(n,a)),s}},$(document).ready(function(){$(".dropdown-toggle").on("click",function(e){e.preventDefault();var t=$(this).siblings(".dropdown-menu");$(t).hasClass("open")?$(t).removeClass("open"):$(t).addClass("open")})}),$(document).ready(function(){$("#intercom-show").on("click",function(e){e.preventDefault(),Intercom("show")})}),$(document).ready(function(){function t(){var e=$("#address-autocomplete-hidden-inputs").find(":input");$("#core-autocomplete-input").val(null),e.val(null)}function n(){var e=$("#address-select-input").find(":input");$.each(e,function(e,t){$(t).val("")})}var a=$("#address-select-input"),o=$("#address-autocomplete-fields");$("#show-address-autocomplete").on("click",function(e){e.preventDefault(),o.toggleClass("hidden"),a.toggleClass("hidden"),n()}),$("#show-address-select").on("click",function(e){e.preventDefault(),a.toggleClass("hidden"),o.toggleClass("hidden"),t()})}),$(document).ready(function(){function a(e,t){0<e.find("input:checked").length?e.find("label").addClass("checked"):e.find("label").removeClass("checked"),d(t)}function o(e,t){var n=e.find("input[type='radio']");t.each(function(e,t){$(t).find("label").removeClass("checked")}),n.is(":checked")&&e.find("label").addClass("checked")}function r(e){var t=$("#after-hours-alert");e?e&&"none"===t.css("display")&&t.fadeIn():t.fadeOut()}function n(e){$("#request-later").removeClass("selected"),e.clear(),$("#request-now").addClass("btn-primary").removeClass("btn-default");var t=$("#request-periods");t.find("input").attr("checked",!1),t.find("label").removeClass("checked"),f()}function i(e){e&&0===e.selectedDates.length&&e.setDate(t()),$("#request-later").addClass("selected"),$("#request-now").removeClass("btn-primary").addClass("btn-default"),$("#request-periods").slideDown().find(".form-group").find("input")}function t(){var e=new Date;return 0<=gon.timeframe_in_days&&e.setDate(e.getDate()+gon.timeframe_in_days),e}function e(e){0<$("#request-later").length&&(0<$("#request-later").val().length?i(e):n(e))}function c(n){var e=function(e,t){a($(t),n),$(t).on("change",function(){a($(t),n)})};$("#request-periods").find(".checkbox").each(e)}function s(){var n=$("#request-periods").find(".radio");n.each(function(e,t){o($(t),n),$(t).on("change",function(){o($(t),n)})})}function u(t){$("#request-now").on("click",function(e){e.preventDefault(),n(t)})}function l(){return 0<$("#request-later").length?flatpickr("#request-later",{minDate:t(),dateFormat:"m/d/Y",onOpen:function(e,t,n){i(n)},onChange:function(e,t,n){var a=$("#request-periods");"none"===a.css("display")&&a.slideDown(),d(n)}}):null}function d(e){if(gon.after_hours&&$("#request-later").hasClass("selected")){var t=e.selectedDates[0],n=$("#request-periods").find("input:checked");t&&p(t)?r(!0):1==n.length&&"evening"==n.last().val()?r(!0):r(!1)}}function f(){if(gon.after_hours){var e=new Date,t=p(e),n=h(e);r(!(!t&&!n))}}function p(e){var t=e.getDay();return 0==t||6==t}function h(e){var t=e.getHours();return t<0||17<=t}try{var m=l();c(m),s(),u(m),e(m)}catch(g){g instanceof ReferenceError&&console.log(g.message)}}),$(document).ready(function(){function a(e,t){$(e).on("click",function(e){e.preventDefault(),e.stopPropagation(),t.toggleClass("open")}),$(document).on("click",function(){t.removeClass("open")})}$(".nav .toggle").on("click",function(e){e.preventDefault();var t=$(this).data("target");t&&$(t).toggleClass("open")}),$('[data-type="dropdown"]').each(function(e,t){if(t.dataset.target){if("click"!==t.dataset.toggle)return;var n=$(t.dataset.target);0<n.length&&a(t,n)}})}),function(){$(document).ready(function(){return $(".rating-star").each(function(){var e;return e=$(this).width()*($(this).data("fill")/100),$(this).find("i:last-of-type").css({width:e})})})}.call(this),$(document).ready(function(){try{var t=$("#photo-upload-modal").jiffyModal();$(".photo-upload-toggle").on("click",function(e){e.preventDefault(),t.show(),$(".errors").remove()}),$(".modal-close").on("click",function(e){e.preventDefault(),t.hide()})}catch(e){e instanceof TypeError&&console.log("Jiffy Modal is not defined binding bootstrap")}$("#profile-photo-upload").on("submit",function(){var e=!1;$(".errors").remove();var t=$("#user_profile_picture");return t.val()||(t.after("<span class='errors'> Please upload a file </span> "),e=!0),!e})}),$(document).ready(function(){$("#more-services").on("click",function(e){e.preventDefault(),$(".service.hidden-xs").each(function(e,t){$(t).removeClass("hidden-xs")}),$(".service.featured.visible-xs").each(function(e,t){$(t).removeClass("visible-xs"),$(t).addClass("hidden-xs")}),$(this).hide()})}),$(document).ready(function(){$(".logout-link").click(function(){window.localStorage.clear(),window.sessionStorage.clear(),document.cookie="job_id=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"})});